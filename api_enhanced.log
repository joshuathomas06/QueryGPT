/Users/joshuathomas/Downloads/datastaxproj/QueryGPT/api.py:101: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
INFO:     Started server process [1005]
INFO:     Waiting for application startup.
INFO:__main__:ğŸ“‹ Started initialization task
INFO:__main__:ğŸš€ Initializing QueryGPT API...
INFO:__main__:ğŸš€ Initialized with BigQuery
INFO:__main__:ğŸ“Š Loading schema (this may take a moment)...
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:__main__:âœ… QueryGPT API ready!
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
ğŸ” Analyzing BigQuery schema...
Limiting to 10 datasets for token management
Dataset Billing2023: found 0 tables, limiting to 3
Dataset SLA: found 2 tables, limiting to 3
Dataset airflow: found 40 tables, limiting to 3
Dataset apollo_feedback: found 2 tables, limiting to 3
Dataset apollo_reporting: found 16 tables, limiting to 3
Dataset astra_client: found 876 tables, limiting to 3
Dataset astra_dev_reporting: found 8 tables, limiting to 3
Dataset astra_dev_reporting__dev: found 1 tables, limiting to 3
Dataset astra_exercise_tracking: found 4 tables, limiting to 3
Dataset astra_fcpmo: found 100 tables, limiting to 3
ğŸ¤– Refining summary with Claude...
âš¡ Executing query: SELECT cloud_account, SUM(daily_cost) as total_cos...
INFO:     127.0.0.1:54032 - "POST /query HTTP/1.1" 200 OK
INFO:     127.0.0.1:54850 - "GET /health HTTP/1.1" 200 OK

ğŸ¤” Understanding your query: 'Show me daily costs by account'
ğŸ” Searching for tables with keywords: email, date, time, organization, monthly, costs, account, customer, yearly, daily, user, period
INFO:     127.0.0.1:54850 - "POST /suggest-tables HTTP/1.1" 200 OK

ğŸ¤” Understanding your query: 'Show cluster information'
ğŸ” Searching for tables with keywords: cluster, information, database, node, deployment, instance
INFO:     127.0.0.1:54850 - "POST /suggest-tables HTTP/1.1" 200 OK

ğŸ¤” Understanding your query: 'show me costs by organization'
ğŸ” Searching for tables with keywords: email, organization, account, costs, customer, user
INFO:     127.0.0.1:55842 - "POST /suggest-tables HTTP/1.1" 200 OK

ğŸ¤” Understanding your query: 'Show me cost breakdown by cost center'
ğŸ” Searching for tables with keywords: payment, cost, spend, daily_cost, center, breakdown, charge, expense, billing
INFO:     127.0.0.1:0 - "POST /suggest-tables HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
âš¡ Executing query: SELECT cloud_account, SUM(daily_cost) as total_cos...
INFO:     127.0.0.1:0 - "POST /query HTTP/1.1" 200 OK
